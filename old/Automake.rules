## $Id$
## Copyright (C) 2006  Deneys S. Maartens  <dsm@tlabs.ac.za>
## Copyright (C) 2007,2008  Enrico Zini <enrico@enricozini.org>
##
## This program is free software; you can redistribute it and/or modify
## it under the terms of the GNU General Public License as published by
## the Free Software Foundation; either version 2, or (at your option)
## any later version.
##
## This program is distributed in the hope that it will be useful,
## but WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
## GNU General Public License for more details.
##
## You should have received a copy of the GNU General Public License
## along with this program; if not, write to the Free Software Foundation,
## Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

## Include this file in the top-level Makefile with an include
## directive.

lib_LTLIBRARIES += \
    msat/libmsat.la \
    msat/libmsat2gdal.la

gdalplugindir = $(libdir)/@GDAL_PLUGIN_DIRNAME@

gdalplugin_LTLIBRARIES = \
    msat/gdal_Meteosatlib.la

noinst_LTLIBRARIES += \
    msat/proj/libproj.la

msat_includedir = \
    $(includedir)/msat
nodist_msat_include_HEADERS = \
    msat/config.h
dist_msat_include_HEADERS = \
    msat/gdalutils.h \
    msat/xrit/fileaccess.h \
    msat/Image.h \
    msat/GdalLayer.h \
    msat/ExportGDAL.h \
    msat/ExportGDTNetCDF.h \
    msat/ExportRepNetCDF.h \
    msat/ExportImage.h \
    msat/GRIB.h \
    msat/grib/utils.h \
    msat/grib/dataset.h \
    msat/SAFH5.h \
    msat/NetCDF.h \
    msat/NetCDF24.h \
    msat/XRIT.h \
    msat/NetCDFCommon.h \
    msat/SAFH5Utils.h \
    msat/openmtp.h \
    msat/Progress.h

msat_proj_includedir = \
    $(includedir)/msat/proj
dist_msat_proj_include_HEADERS = \
    msat/proj/const.h \
    msat/proj/Geos.h \
    msat/proj/Latlon.h \
    msat/proj/Mercator.h \
    msat/proj/Points.h \
    msat/proj/Polar.h \
    msat/proj/Projection.h

msat_libmsat_la_CXXFLAGS =
msat_libmsat_la_LDFLAGS = \
    -version-info @LIBMSAT_VERSION_INFO@
msat_libmsat_la_LIBADD = \
    msat/proj/libproj.la \
    openmtp/libopenmtp.la
msat_libmsat_la_SOURCES = \
    msat/Image.cpp \
    msat/GdalLayer.cpp \
    msat/openmtp.cpp \
    msat/Progress.cpp

msat_libmsat2gdal_la_LDFLAGS = \
    -version-info @LIBMSAT_VERSION_INFO@
msat_libmsat2gdal_la_LIBADD = \
    msat/libmsat.la
msat_libmsat2gdal_la_SOURCES = \
    msat/msat2gdal.cpp

msat_gdal_Meteosatlib_la_LDFLAGS = \
    -module -version-info @LIBMSAT_VERSION_INFO@
msat_gdal_Meteosatlib_la_LIBADD = \
    msat/libmsat.la
msat_gdal_Meteosatlib_la_SOURCES = \
    msat/msatgdalplugin.cpp

msat_proj_libproj_la_SOURCES = \
    msat/proj/Geos.cpp \
    msat/proj/Latlon.cpp \
    msat/proj/Mercator.cpp \
    msat/proj/Polar.cpp

if GRIB
msat_libmsat_la_LIBADD += \
    $(GRIBAPI_LIBS)
msat_libmsat_la_SOURCES += \
    msat/GRIB.cpp \
    msat/grib/dataset.cpp
endif

if HRIT
msat_libmsat_la_LIBADD += \
    hrit/libhrit.la
msat_libmsat_la_SOURCES += \
    msat/xrit/fileaccess.cpp \
    msat/XRIT.cpp
endif

if HAVE_NETCDF
msat_libmsat_la_LIBADD += \
    -lnetcdf_c++ \
    -lnetcdf
msat_libmsat_la_SOURCES += \
    msat/NetCDF.cpp \
    msat/NetCDF24.cpp
endif
#    msat/ExportGDTNetCDF.cpp \
#    msat/ExportRepNetCDF.cpp

if HDF5
msat_libmsat_la_LIBADD += \
    -lhdf5_cpp -lhdf5
msat_libmsat_la_SOURCES += \
    msat/SAFH5Utils.cpp \
    msat/SAFH5.cpp
endif

if HAVE_MAGICK
msat_libmsat_la_CXXFLAGS += $(MAGICKPP_CFLAGS)
msat_libmsat_la_LIBADD += $(MAGICKPP_LIBS)
msat_libmsat_la_SOURCES += msat/ExportImage.cpp
endif

if GDAL
msat_libmsat_la_LIBADD += \
    $(GDAL_LIBS)
msat_libmsat_la_SOURCES += \
    msat/gdalutils.cpp \
    msat/ExportGDAL.cpp
endif

## -fin-
## vim:syn=automake:
