Name:           @PACKAGE_NAME@
Version:        @PACKAGE_VERSION@
Release:        1
Summary:        Applications to manage Meteosat satellite images

Group:          Applications/Meteo
License:        GPL
URL:            http://meteosatlib.sf.net
Source0:        %{name}-%{version}.tar.gz
Source1:        PublicDecompWT.zip
NoSource:       1
BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

Vendor:         Graziano Giuliani <giuliani@lamma.rete.toscana.it>
Packager:       Deneys S. Maartens <dsm@tlabs.ac.za>

%description
Programs to convert Meteosat8 HRIT format images to WMO GRIB version 1
format, NetCDF COARDS compliant format, image format (any ImageMagick
supported format).

Converted NetCDF images can be reprojected in a regular latitude
longitude grid of selected resolution.

A program to convert GRIB images back to NetCDF images for reprojection
is also given.

@HRI_TRUE@%package hri-devel
@HRI_TRUE@Requires: @PACKAGE_NAME@ = %{version}
@HRI_TRUE@
@HRI_TRUE@Group: Libraries/Meteo
@HRI_TRUE@Summary: Development for Meteosat HRI satellite images
@HRI_TRUE@
@HRI_TRUE@%description hri-devel
@HRI_TRUE@Libraries to read Meteosat 7/8 images in various formats.

@HRIT_TRUE@%package hrit-devel
@HRIT_TRUE@Requires: @PACKAGE_NAME@ = %{version}
@HRIT_TRUE@
@HRIT_TRUE@License: Non Free (Copyright Eumetsat)
@HRIT_TRUE@Group: Libraries/Meteo
@HRIT_TRUE@Summary: Development for Meteosat HRI satellite images
@HRIT_TRUE@
@HRIT_TRUE@%description hrit-devel
@HRIT_TRUE@Libraries to read Meteosat 7/8 images in various formats.
@HRIT_TRUE@For MSG data decompression, You need the EUMETSAT source code for
@HRIT_TRUE@the decompression library for Wavelet, JPEG and T4 images.
@HRIT_TRUE@
@HRIT_TRUE@!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
@HRIT_TRUE@
@HRIT_TRUE@Please fill the form at
@HRIT_TRUE@
@HRIT_TRUE@   http://www.eumetsat.de/en/dps/helpdesk/tools.html
@HRIT_TRUE@
@HRIT_TRUE@!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

@MSG_NATIVE_TRUE@%package msg-native-devel
@MSG_NATIVE_TRUE@Requires: @PACKAGE_NAME@ = %{version}
@MSG_NATIVE_TRUE@
@MSG_NATIVE_TRUE@Group: Libraries/Meteo
@MSG_NATIVE_TRUE@Summary: Development for Meteosat MSG satellite images
@MSG_NATIVE_TRUE@
@MSG_NATIVE_TRUE@%description msg-native-devel
@MSG_NATIVE_TRUE@Libraries to read Meteosat 7/8 images in various formats.

@OMTP_IDS_TRUE@%package omtp-ids-devel
@OMTP_IDS_TRUE@Requires: @PACKAGE_NAME@ = %{version}
@OMTP_IDS_TRUE@
@OMTP_IDS_TRUE@Group: Libraries/Meteo
@OMTP_IDS_TRUE@Summary: Development for Meteosat OpenMTP-IDS satellite images
@OMTP_IDS_TRUE@
@OMTP_IDS_TRUE@%description omtp-ids-devel
@OMTP_IDS_TRUE@Libraries to read Meteosat 7/8 images in various formats.

@OPENMTP_TRUE@%package openmtp-devel
@OPENMTP_TRUE@Requires: @PACKAGE_NAME@ = %{version}
@OPENMTP_TRUE@
@OPENMTP_TRUE@Group: Libraries/Meteo
@OPENMTP_TRUE@Summary: Development for Meteosat OpenMTP-IDS satellite images
@OPENMTP_TRUE@
@OPENMTP_TRUE@%description openmtp-devel
@OPENMTP_TRUE@Libraries to read Meteosat 7/8 images in various formats.

@THORNSDS_DB1_TRUE@%package thornsds_db1-devel
@THORNSDS_DB1_TRUE@Requires: @PACKAGE_NAME@ = %{version}
@THORNSDS_DB1_TRUE@
@THORNSDS_DB1_TRUE@Group: Libraries/Meteo
@THORNSDS_DB1_TRUE@Summary: Development for Meteosat ThornSDS DB1 PDUS images
@THORNSDS_DB1_TRUE@
@THORNSDS_DB1_TRUE@%description thornsds_db1-devel
@THORNSDS_DB1_TRUE@Libraries to read Meteosat 7/8 images in various formats.

%prep
%setup -q
test -f %{SOURCE1} \
    && ln -s %{SOURCE1} decompress/ \
    || echo " *** WARNING: source file not found: %{SOURCE1}"

%build
configure_disable=
@HRI_FALSE@configure_disable="$configure_disable --disable-hri"
@HRIT_FALSE@configure_disable="$configure_disable --disable-hrit"
@MSG_NATIVE_FALSE@configure_disable="$configure_disable --disable-msg-native"
@OMTP_IDS_FALSE@configure_disable="$configure_disable --disable-omtp-ids"
@OPENMTP_FALSE@configure_disable="$configure_disable --disable-openmtp"
@THORNSDS_DB1_FALSE@configure_disable="$configure_disable --disable-thornsds_db1"
@HDF5_FALSE@configure_disable="$configure_disable --disable-hdf5"

%configure $configure_disable
make %{?_smp_mflags}

%install
rm -rf $RPM_BUILD_ROOT
%makeinstall

%clean
rm -rf $RPM_BUILD_ROOT

%files
%doc AUTHORS ChangeLog COPYING CREDITS INSTALL NEWS
%doc PublicDecompWT_LICENSE README TODO
%{_bindir}
@HRI_TRUE@%{_libdir}/libhri.so*
@HRIT_TRUE@%{_libdir}/libhrit.so*
@MSG_NATIVE_TRUE@%{_libdir}/libnative.so*
@OMTP_IDS_TRUE@%{_libdir}/libomtp-ids.so*
@OPENMTP_TRUE@%{_libdir}/libopenmtp.so*
@THORNSDS_DB1_TRUE@%{_libdir}/libthornsds_db1.so*

@HRI_TRUE@%files hri-devel
@HRI_TRUE@%{_includedir}/hri
@HRI_TRUE@%{_libdir}/libhri.a
@HRI_TRUE@%{_libdir}/libhri.la

@HRIT_TRUE@%files hrit-devel
@HRIT_TRUE@%{_includedir}/hrit
@HRIT_TRUE@%{_includedir}/PublicDecompWT
@HRIT_TRUE@%{_libdir}/libCOMP.a
@HRIT_TRUE@%{_libdir}/libDISE.a
@HRIT_TRUE@%{_libdir}/libhrit.a
@HRIT_TRUE@%{_libdir}/libhrit.la
@HRIT_TRUE@%{_libdir}/libJPEG.a
@HRIT_TRUE@%{_libdir}/libT4.a
@HRIT_TRUE@%{_libdir}/libWT.a

@MSG_NATIVE_TRUE@%files msg-native-devel
@MSG_NATIVE_TRUE@%{_includedir}/msg-native
@MSG_NATIVE_TRUE@%{_libdir}/libnative.a
@MSG_NATIVE_TRUE@%{_libdir}/libnative.la

@OMTP_IDS_TRUE@%files omtp-ids-devel
@OMTP_IDS_TRUE@%{_includedir}/omtp-ids
@OMTP_IDS_TRUE@%{_libdir}/libomtp-ids.la
@OMTP_IDS_TRUE@%{_libdir}/libomtp-ids.a

@THORNSDS_DB1_TRUE@%files thornsds_db1-devel
@THORNSDS_DB1_TRUE@%{_includedir}/thornsds_db1
@THORNSDS_DB1_TRUE@%{_libdir}/libthornsds_db1.la
@THORNSDS_DB1_TRUE@%{_libdir}/libthornsds_db1.a

@OPENMTP_TRUE@%files openmtp-devel
@OPENMTP_TRUE@%{_includedir}/openmtp
@OPENMTP_TRUE@%{_libdir}/libopenmtp.la
@OPENMTP_TRUE@%{_libdir}/libopenmtp.a

%changelog
* Tue Aug 15 2006  Deneys S. Maartens  <dsm@tlabs.ac.za>  0.4.2
- Added logic to add conditional disable-* flags to %configure

* Wed Aug 08 2005  Graziano Giuliani  <graziano.giuliani@poste.it>  0.4.0
- Added ThornSDS DB1 file interface

* Fri Jul 01 2005  Deneys S. Maartens  <dsm@tlabs.ac.za>  0.3.6-1
- modified original meteosatlib.spec by Paolo Patruno
  <ppatruno@smr.arpa.emr.it>: added sepparate devel sections

# -fin-
