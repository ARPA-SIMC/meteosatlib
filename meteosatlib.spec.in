Name:           @PACKAGE_NAME@
Version:        @PACKAGE_VERSION@
Release:        1
Summary:        Shared libraries to read Meteosat satellite images

Group:          Applications/Meteo
License:        GPL
URL:            http://meteosatlib.sf.net
Source0:        %{name}-%{version}.tar.gz
Source1:        PublicDecompWT.zip
NoSource:       1
BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

BuildRequires:   netcdf-devel  , ImageMagick-c++-devel
Vendor:         Graziano Giuliani <giuliani@lamma.rete.toscana.it> Enrico Zini <enrico@enricozini.org> 
Packager:       Deneys S. Maartens <dsm@tlabs.ac.za> Paolo Patruno <ppatruno@arpa.emr.it>

%description

C++ source code to read Meteosat Images in various formats.
Supported: OpenMTP OpenMTP-IDS HRI HRIT/LRIT.

This library is used to read Meteosat files on a PDUS receiving
station. No decryption is performed.


@HRI_TRUE@%package hri-devel

@HRI_TRUE@Group: Libraries/Meteo
@HRI_TRUE@Summary: Development for Meteosat HRI satellite images

@HRI_TRUE@%description hri-devel
@HRI_TRUE@Libraries to read Meteosat 7/8/9 images in various formats.

@HRI_TRUE@%package hrit-devel

@HRI_TRUE@License: Non Free (Copyright Eumetsat)
@HRI_TRUE@Group: Libraries/Meteo
@HRI_TRUE@Summary: Development for Meteosat HRI satellite images

@HRI_TRUE@%description hrit-devel
@HRI_TRUE@Libraries to read Meteosat 7/8 images in various formats.
@HRI_TRUE@For MSG data decompression, You need the EUMETSAT source code for
@HRI_TRUE@the decompression library for Wavelet, JPEG and T4 images.

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

Please fill the form at

   http://www.eumetsat.de/en/dps/helpdesk/tools.html

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

@MSG_NATIVE_TRUE@%package msg-native-devel

@MSG_NATIVE_TRUE@Group: Libraries/Meteo
@MSG_NATIVE_TRUE@Summary: Development for Meteosat MSG satellite images

@MSG_NATIVE_TRUE@%description msg-native-devel
@MSG_NATIVE_TRUE@Libraries to read Meteosat 7/8 images in various formats.

@OMTP_IDS_TRUE@%package omtp-ids-devel

@OMTP_IDS_TRUE@Group: Libraries/Meteo
@OMTP_IDS_TRUE@Summary: Development for Meteosat OpenMTP-IDS satellite images

@OMTP_IDS_TRUE@%description omtp-ids-devel
@OMTP_IDS_TRUE@Libraries to read Meteosat 7/8 images in various formats.

@OMTP_IDS_TRUE@%package openmtp-devel

@OMTP_IDS_TRUE@Group: Libraries/Meteo
@OMTP_IDS_TRUE@Summary: Development for Meteosat OpenMTP-IDS satellite images

@OMTP_IDS_TRUE@%description openmtp-devel
@OMTP_IDS_TRUE@Libraries to read Meteosat 7/8 images in various formats.

@THORNSDS_DB1_TRUE@%package thornsds_db1-devel

@THORNSDS_DB1_TRUE@Group: Libraries/Meteo
@THORNSDS_DB1_TRUE@Summary: Development for Meteosat ThornSDS DB1 PDUS images

@THORNSDS_DB1_TRUE@%description thornsds_db1-devel
@THORNSDS_DB1_TRUE@Libraries to read Meteosat 7/8 images in various formats.


%package msat-devel

Group: Libraries/Meteo
Summary:Library of utility functions for working with Meteosat images

%description msat-devel
Libraries to read Meteosat 7/8 images in various formats.
This is the library for C++ development.

%prep
%setup -q
test -f %{SOURCE1} \
    && ln -s %{SOURCE1} decompress/ \
    || echo " *** WARNING: source file not found: %{SOURCE1}"

%build
configure_disable=
@HRI_FALSE@configure_disable="$configure_disable --disable-hri"
@HRIT_FALSE@configure_disable="$configure_disable --disable-hrit"
@MSG_NATIVE_FALSE@configure_disable="$configure_disable --disable-msg-native"
@OMTP_IDS_FALSE@configure_disable="$configure_disable --disable-omtp-ids"
@OPENMTP_FALSE@configure_disable="$configure_disable --disable-openmtp"
@THORNSDS_DB1_FALSE@configure_disable="$configure_disable --disable-thornsds_db1"

%configure $configure_disable


make %{?_smp_mflags}

%install
rm -rf $RPM_BUILD_ROOT
%makeinstall

%clean
rm -rf $RPM_BUILD_ROOT

%files
%doc AUTHORS ChangeLog COPYING CREDITS INSTALL NEWS
%doc PublicDecompWT_LICENSE README TODO
%{_bindir}
@HRI_TRUE@%{_libdir}/libhri.so*
@HRIT_TRUE@%{_libdir}/libhrit.so*
@MSG_NATIVE_TRUE@%{_libdir}/libnative.so*
@OMTP_IDS_TRUE@%{_libdir}/libomtp-ids.so*
@OPENMTP_TRUE@%{_libdir}/libopenmtp.so*
@THORNSDS_DB1_TRUE@%{_libdir}/libthornsds_db1.so*
%{_libdir}/libmsat.so*


%files hri-devel
@HRI_TRUE@%{_includedir}/hri
@HRI_TRUE@%{_libdir}/libhri.a
@HRI_TRUE@%{_libdir}/libhri.la

%files hrit-devel
@HRI_TRUE@%{_includedir}/hrit
#%{_includedir}/PublicDecompWT
#%{_libdir}/libCOMP.a
#%{_libdir}/libDISE.a
@HRI_TRUE@%{_libdir}/libhrit.a
%{_libdir}/libhrit.la
#%{_libdir}/libJPEG.a
#%{_libdir}/libT4.a
#%{_libdir}/libWT.a
@HRI_TRUE@/usr/lib/pkgconfig/libhrit.pc
@HRI_TRUE@/usr/share/aclocal/libhrit.m4


%files msg-native-devel
@MSG_NATIVE_TRUE@%{_includedir}/msg-native
@MSG_NATIVE_TRUE@%{_libdir}/libnative.a
@MSG_NATIVE_TRUE@%{_libdir}/libnative.la

%files omtp-ids-devel
@OMTP_IDS_TRUE@%{_includedir}/omtp-ids
@OMTP_IDS_TRUE@%{_libdir}/libomtp-ids.la
@OMTP_IDS_TRUE@%{_libdir}/libomtp-ids.a

%files thornsds_db1-devel
@THORNSDS_DB1_TRUE@%{_includedir}/thornsds_db1
@THORNSDS_DB1_TRUE@%{_libdir}/libthornsds_db1.la
@THORNSDS_DB1_TRUE@%{_libdir}/libthornsds_db1.a

@OPENMTP_TRUE@%files openmtp-devel
@OPENMTP_TRUE@%{_includedir}/openmtp
@OPENMTP_TRUE@%{_libdir}/libopenmtp.la
@OPENMTP_TRUE@%{_libdir}/libopenmtp.a
@OPENMTP_TRUE@/usr/lib/pkgconfig/libopenmtp.pc


%files msat-devel
%{_includedir}/msat
%{_libdir}/libmsat.a
%{_libdir}/libmsat.la
/usr/lib/pkgconfig/libmsat.pc
/usr/share/aclocal/libmsat.m4


%changelog
* Tue Feb 16 2010 Paolo Patruno <patruno@localhost.localdomain> - @PACKAGE_VERSION@-1
- adapted to meteosatlib 0.6

* Wed Feb 28 2007 root <root@strip.metarpa> - 0.5-1
- hdf5 c++library is static, so we need a specific version in BuildRequires

* Tue Feb 13 2007 Paolo Patruno <ppatruno@arpa.emr.it> - 0.5-1
- added grib and msat pachages and other change to switch to 0.5 release

* Wed Aug 08 2005  Graziano Giuliani  <graziano.giuliani@poste.it>  0.4.0
- Added ThornSDS DB1 file interface

* Fri Jul 01 2005  Deneys S. Maartens  <dsm@tlabs.ac.za>  0.3.6-1
- modified original meteosatlib.spec by Paolo Patruno
  <ppatruno@smr.arpa.emr.it>: added sepparate devel sections
